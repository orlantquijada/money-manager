# Fund Detail View Progress

## Quick Reference
- PRD: docs/specs/fund-detail-view.json
- Main files: apps/mobile/src/app/(app)/fund/[id].tsx

---

## Progress Log

### 2026-01-15 - FDV-004 NON_NEGOTIABLE stats

[FDV-004] DONE - Stats overview for NON_NEGOTIABLE funds
- Added paidAt field to funds schema for tracking payment status
- Updated markAsPaid mutation to set paidAt timestamp
- Created NonNegotiableStats component with:
  - Period label (e.g., "this month Bill")
  - Amount saved + CategoryProgressBars
  - Goal amount + percentage
  - "Paid on [date]" badge when paid in current period
  - Reset countdown when not yet paid
  - Mark as Paid button when fully funded
- Staleness check: paidAt only valid if >= current period start (query-side)

### 2026-01-15 - FDV-006 Recent transactions

[FDV-006] DONE - Recent transactions section
- Limited display to 5 transactions (.slice(0, 5))
- Added "See all" link â†’ /fund/[id]/transactions
- Empty state: "No transactions yet"
- "See all" only shows when transactions exist

### 2026-01-15 - FDV-003 SPENDING stats

[FDV-003] DONE - Stats overview for SPENDING funds
- Added SpendingStats component to fund/[id].tsx
- Uses CategoryProgressBars for multi-bar display (WEEKLY/BIMONTHLY/MONTHLY)
- Shows spent/remaining with overspent state (red bar + label)
- Reset countdown for non-EVENTUALLY funds
- Extracted to separate component to reduce cognitive complexity

### 2026-01-15 - FDV-001 API endpoint

[FDV-001] DONE - transaction.listByFund endpoint
- Added to packages/api/src/router/transactions.ts
- Cursor pagination using base64-encoded {date, id}
- Leverages existing idx_transactions_fund_date index
- Returns {transactions, nextCursor}

### 2026-01-14 - Initial setup

- PRD created with initial structure
- Ready for design decisions

---

## Blockers
(none)

### 2026-01-15 - FDV-008 Transactions route

[FDV-008] DONE - Create /fund/[id]/transactions route
- Created new route at `/apps/mobile/src/app/(app)/fund/[id]/transactions.tsx`
- Reuses TransactionList component for date grouping and pagination
- Manual cursor pagination pattern (same as main transactions tab)
- Updated `transaction.listByFund` API endpoint to include fund relation for consistency
- Exported TransactionItem type from transactions barrel export
- Verified type checking passes

## Key Decisions
- (decided) SPENDING funds: multi-bar progress (like dashboard), spent/remaining, reset countdown
- (pending) Whether to include spending trends/charts
